<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="680" viewBox="0 0 1200 680"><rect x="0" y="0" width="1200" height="680" fill="#f7f7fb"/><defs>  <marker id="arrow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="8" markerHeight="8" orient="auto">    <path d="M 0 0 L 10 5 L 0 10 z" fill="#333"/>  </marker></defs><text x="70" y="30" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">Admin/CLI</text><line x1="70" y1="40" x2="70" y2="660" stroke="#999" stroke-dasharray="4,4"/><text x="185" y="30" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">Controller</text><line x1="185" y1="40" x2="185" y2="660" stroke="#999" stroke-dasharray="4,4"/><text x="300" y="30" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">Scanner</text><line x1="300" y1="40" x2="300" y2="660" stroke="#999" stroke-dasharray="4,4"/><text x="415" y="30" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">Converter</text><line x1="415" y1="40" x2="415" y2="660" stroke="#999" stroke-dasharray="4,4"/><text x="530" y="30" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">Rewriter</text><line x1="530" y1="40" x2="530" y2="660" stroke="#999" stroke-dasharray="4,4"/><text x="645" y="30" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">Metadata</text><line x1="645" y1="40" x2="645" y2="660" stroke="#999" stroke-dasharray="4,4"/><text x="760" y="30" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">Backup</text><line x1="760" y1="40" x2="760" y2="660" stroke="#999" stroke-dasharray="4,4"/><text x="875" y="30" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">Reporter</text><line x1="875" y1="40" x2="875" y2="660" stroke="#999" stroke-dasharray="4,4"/><text x="990" y="30" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">DB</text><line x1="990" y1="40" x2="990" y2="660" stroke="#999" stroke-dasharray="4,4"/><text x="1105" y="30" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">Uploads</text><line x1="1105" y1="40" x2="1105" y2="660" stroke="#999" stroke-dasharray="4,4"/><line x1="70" y1="80" x2="185" y2="80" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/><text x="127.5" y="74.0" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">Run batch</text><line x1="185" y1="110" x2="300" y2="110" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/><text x="242.5" y="104.0" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">Get next N</text><line x1="300" y1="140" x2="185" y2="140" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/><text x="242.5" y="134.0" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">IDs[]</text><text x="600" y="170" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">Loop per attachment</text><line x1="185" y1="190" x2="415" y2="190" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/><text x="300.0" y="184.0" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">convert()</text><line x1="415" y1="220" x2="1105" y2="220" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/><text x="760.0" y="214.0" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">write WebP + sizes</text><line x1="185" y1="250" x2="530" y2="250" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/><text x="357.5" y="244.0" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">build map &amp; rewrite</text><line x1="530" y1="280" x2="990" y2="280" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/><text x="760.0" y="274.0" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">posts/meta/options</text><line x1="185" y1="310" x2="645" y2="310" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/><text x="415.0" y="304.0" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">update metadata</text><line x1="645" y1="340" x2="990" y2="340" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/><text x="817.5" y="334.0" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">attachment metadata</text><line x1="185" y1="370" x2="760" y2="370" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/><text x="472.5" y="364.0" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">backup/delete</text><line x1="760" y1="400" x2="1105" y2="400" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/><text x="932.5" y="394.0" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">move/delete files</text><line x1="185" y1="430" x2="875" y2="430" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/><text x="530.0" y="424.0" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">store report</text><line x1="875" y1="460" x2="990" y2="460" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/><text x="932.5" y="454.0" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">_webp_migrator_report</text><line x1="185" y1="490" x2="70" y2="490" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/><text x="127.5" y="484.0" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">status</text></svg>