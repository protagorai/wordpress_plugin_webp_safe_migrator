<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="600" viewBox="0 0 1200 600"><rect x="0" y="0" width="1200" height="600" fill="#f7f7fb"/><defs>  <marker id="arrow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="8" markerHeight="8" orient="auto">    <path d="M 0 0 L 10 5 L 0 10 z" fill="#333"/>  </marker></defs><rect x="60" y="100" width="300" height="140" rx="10" ry="10" fill="#fff" stroke="#333" stroke-width="2"/><text x="210" y="130" font-family="Inter,Arial,Helvetica,sans-serif" font-size="16" text-anchor="middle" font-weight="bold">posts</text><text x="210" y="155" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">post_content (HTML)</text><text x="210" y="180" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">Find→Replace URLs</text><rect x="60" y="270" width="300" height="160" rx="10" ry="10" fill="#fff" stroke="#333" stroke-width="2"/><text x="210" y="300" font-family="Inter,Arial,Helvetica,sans-serif" font-size="16" text-anchor="middle" font-weight="bold">postmeta</text><text x="210" y="325" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">meta_value (serialized)</text><text x="210" y="350" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">maybe_unserialize()</text><text x="210" y="375" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">deep_replace()</text><text x="210" y="400" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">maybe_serialize()</text><rect x="60" y="460" width="300" height="120" rx="10" ry="10" fill="#fff" stroke="#333" stroke-width="2"/><text x="210" y="490" font-family="Inter,Arial,Helvetica,sans-serif" font-size="16" text-anchor="middle" font-weight="bold">options</text><text x="210" y="515" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">option_value (serialized)</text><text x="210" y="540" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">safe replace pipeline</text><rect x="440" y="220" width="320" height="160" rx="10" ry="10" fill="#fff" stroke="#333" stroke-width="2"/><text x="600" y="250" font-family="Inter,Arial,Helvetica,sans-serif" font-size="18" text-anchor="middle" font-weight="bold">Deep Replace Engine</text><text x="600" y="275" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">Recursively traverse strings</text><text x="600" y="295" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">Apply URL map</text><text x="600" y="315" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">Preserve arrays/objects</text><rect x="820" y="100" width="320" height="120" rx="10" ry="10" fill="#fff" stroke="#333" stroke-width="2"/><text x="980" y="130" font-family="Inter,Arial,Helvetica,sans-serif" font-size="18" text-anchor="middle" font-weight="bold">URL Map</text><text x="980" y="155" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">old.jpg → new.webp</text><text x="980" y="175" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">old-300x200.jpg → new-300x200.webp</text><line x1="360" y1="170" x2="440" y2="260" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/><text x="400.0" y="209.0" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">string replace</text><line x1="360" y1="330" x2="440" y2="260" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/><text x="400.0" y="289.0" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">deserialize → replace</text><line x1="360" y1="520" x2="440" y2="300" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/><text x="400.0" y="404.0" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">deserialize → replace</text><line x1="760" y1="260" x2="820" y2="160" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/><text x="790.0" y="204.0" font-family="Inter,Arial,Helvetica,sans-serif" font-size="14" text-anchor="middle" font-weight="normal">uses</text></svg>